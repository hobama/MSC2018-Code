#### IMPORTANT
* This recipe **DOES NOT** work with Terraform 0.12. Use 0.11.
* The S3 bucket names ( *cowrie-json-logs* and *cowrie-malware-samles* ) are hard-coded throughout the code and it appears that S3 bucket names are **globally** unique. which means you must use your own buckets.
  1. You must provision those buckets manually (outside of terraform) to avoid accidentally pulverizing your data with ```terraform destroy``` 
  1. You must search/replace the bucket names throughout the code. This should've been configurable. Mea culpa.

#### Folder structure
* global - Global AWS resources
* cowrie - Regional AWS resources
* generated - Auto-generated content from the scripts in bin/
* payload - The contents of this folder are uploaded to each EC2 instance by terraform. Contains config files, recipes for configuring the honeypot etc.
* bin - Various useful scripts.
* assets - Resources auto-generated by terraform itself e.g public/private ssh-keys.

#### Basic usage
1. Update the EC2 Spot pricing by running ```bin/get-spot-prices.rb```
2. Launch honeypot with: 
```
terraform init
terraform apply --parallelism=10
```

#### N.B N.B N.B
The SSH keys for accessing the provisioned EC2 instances are auto-generated and persisted in the **assets** directory.
When running ```terraform destroy``` those SSH keys are destroyed also. 
This is a long way of saying **DO NOT** use the SSH key named **honeypot_ssh_key** outside of Terraform because it is frequently rotated.
If you dislike this behaviour - provide a static SSH keypair.


